<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: softdelete | Daves dev warblings]]></title>
  <link href="http://jedistirfry.co.uk/blog/categories/softdelete/atom.xml" rel="self"/>
  <link href="http://jedistirfry.co.uk/"/>
  <updated>2014-07-30T15:45:30+01:00</updated>
  <id>http://jedistirfry.co.uk/</id>
  <author>
    <name><![CDATA[David Yell]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Hack to fix SoftDelete behaviour return in CakePHP]]></title>
    <link href="http://jedistirfry.co.uk/blog/2013-04/softdelete-return/"/>
    <updated>2013-04-16T00:00:00+01:00</updated>
    <id>http://jedistirfry.co.uk/blog/2013-04/softdelete-return</id>
    <content type="html"><![CDATA[<h3>Use case</h3>

<p>You have downloaded and installed the <a href="https://github.com/cakedc/utils">Utils.SoftDelete</a> behaviour, but when you delete an item the return is <code>false</code> because the behaviour has stopped the delete and run an update instead.</p>

<p>You still need to feedback to the user that the item has been deleted succesfully, ie, returning a <code>true</code>.</p>

<h3>References</h3>

<ul>
<li><a href="https://github.com/CakeDC/utils/issues/19">https://github.com/CakeDC/utils/issues/19</a></li>
<li><a href="https://groups.google.com/forum/?fromgroups=#!topic/cakephp-core/2vIZN8Sq8RE">cakephp-core â€º callbacks and returning true</a></li>
</ul>


<h3>Solution</h3>

<p>This is a solution that I&rsquo;ve written myself based on the solutions of Ceeram and Augusto Franzoia.</p>

<p>It will need to go into the <code>AppModel</code> of your application.</p>

<p>```php
&lt;?php
public function delete($id = null, $cascade = true) {</p>

<pre><code>$result = parent::delete($id, $cascade);
if ($result === false &amp;&amp; $this-&gt;Behaviors-&gt;enabled('SoftDelete')) {
   return $this-&gt;field('deleted', array('deleted' =&gt; 1));
}
return $result;
</code></pre>

<p>}
```</p>

<h3>Success</h3>

<p>Go make a brew!</p>
]]></content>
  </entry>
  
</feed>
