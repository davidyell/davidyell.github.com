<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: calendar | Daves dev warblings]]></title>
  <link href="http://jedistirfry.co.uk/blog/categories/calendar/atom.xml" rel="self"/>
  <link href="http://jedistirfry.co.uk/"/>
  <updated>2015-05-29T14:12:42+01:00</updated>
  <id>http://jedistirfry.co.uk/</id>
  <author>
    <name><![CDATA[David Yell]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Making a calendar]]></title>
    <link href="http://jedistirfry.co.uk/blog/2015-05/making-calendars/"/>
    <updated>2015-05-29T11:04:12+01:00</updated>
    <id>http://jedistirfry.co.uk/blog/2015-05/making-calendars</id>
    <content type="html"><![CDATA[<h2>How to generate a calendar using PHP?</h2>

<p>At work I built a new holiday calendar system to replace the old system which was being closed down. The company needed a way for employees to request holiday and also managers to check booked holidays by team.</p>

<p><a href="http://i.imgur.com/079nh27.png">This is what it looks like once it&rsquo;s been styled</a>.</p>

<h2>Why have I written my own code?</h2>

<p>A few reasons really, primarily because it&rsquo;s a learning experience and secondly because I don&rsquo;t recall being able to find a decent library with did it. No doubt there are a few, if you know any, please leave a comment and I&rsquo;ll update this post, thanks!</p>

<h2>Calendar code</h2>

<p>Just a point to note, this is written in a <a href="http://cakephp.org/">CakePHP</a> view, and uses a table.</p>

<p>```php</p>

<table summary="calendar" class="table table-bordered" id="holiday-calendar">
    <thead>
        <tr>
            <th><?= __('Monday')?></th>
            <th><?= __('Tuesday')?></th>
            <th><?= __('Wednesday')?></th>
            <th><?= __('Thursday')?></th>
            <th><?= __('Friday')?></th>
            <th><?= __('Saturday')?></th>
            <th><?= __('Sunday')?></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <?php
            // $days is a CakePHP2 data array of days
            
            // Work out when the month starts in the grid
            for ($i = 1; $i <= 7; $i++) {
                if ((int)date('N', strtotime($days[0]['Day']['date'])) === $i) {
                    // This is a CakePHP element to make a table cell for the day
                    echo $this->element('calendar-day', ['day' => $days[0]]);
                    break;
                } else {
                    echo "<td>&nbsp;</td>";
                }
            }

            $numOutput = 1;
            $remainingCells = 7 - $i;

            // Output the remaining cells after the first day
            for ($i = 1; $i <= $remainingCells; $i++) {
                echo $this->element('calendar-day', ['day' => $days[$i]]);
                $numOutput++;
            }
            ?>
        </tr>

        <tr>
            <?php
            $dayOfWeek = 0;
            // Output the remaining rows
            for ($i = $numOutput; $i < count($days); $i++) {
                echo $this->element('calendar-day', ['day' => $days[$i]]);

                // Look for the end of the week to roll a new row
                $dayOfWeek++;
                if ($dayOfWeek === 7) {
                    $dayOfWeek = 0;
                    echo "</tr><tr>";
                }
            }

            // Finish off the table with empty rows
            if ($dayOfWeek != 7) {
                for ($i = $dayOfWeek; $i < 7; $i++) {
                    echo "<td>&nbsp;</td>";
                }
            }
            ?>
        </tr>

    </tbody>
</table>


<p>```</p>

<h3>All done</h3>

<p>That&rsquo;s it, you now have a nice horizontal calendar similar to Google Calendar!</p>
]]></content>
  </entry>
  
</feed>
